<!DOCTYPE html>
<html lang="en-us">
<head>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    
    
        
        <meta name="twitter:card" content="summary_large_image"/>
        <meta name="twitter:image" content="/images/lptzrhqh6hplqmtedyra.jpg"/>
    



<meta name="twitter:title" content="Use-case Driven API Design (part 2)"/>
<meta name="twitter:description" content=""/>
<meta name="twitter:site" content="@"/>



  	<meta property="og:title" content="Use-case Driven API Design (part 2) &middot; Bison Design" />
  	<meta property="og:site_name" content="Bison Design" />
  	<meta property="og:url" content="http://bisondesign.net/post/use-case-driven-design-2/" />

    
       <meta property="og:image" content="/images/lptzrhqh6hplqmtedyra.jpg"/>
    

    
    <meta property="og:description" content="" />
  	<meta property="og:type" content="article" />
    <meta property="article:published_time" content="2018-04-07T20:21:11-05:00" />

    
    <meta property="article:tag" content="API" />
    
    <meta property="article:tag" content="Design" />
    
    

    <title>Use-case Driven API Design (part 2) &middot; Bison Design</title>

    
    <meta name="description" content="Preface In the previous post I talked about the importance of good design when making a published API. I ended by giving four &amp;lsquo;C&amp;rsquo;s of a good API: co" />
    

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="/images/favicon.ico">
	  <link rel="apple-touch-icon" href="/images/apple-touch-icon.png" />

    <link rel="stylesheet" type="text/css" href="/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="/css/nav.css" />
    <link rel="stylesheet" type="text/css" href="/css/prism.css" />

    

    

    
      
          <link href="/index.xml" rel="alternate" type="application/rss+xml" title="Bison Design" />
      
      
    
    <meta name="generator" content="Hugo 0.18.1" />

    <link rel="canonical" href="http://bisondesign.net/post/use-case-driven-design-2/" />

    
      
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "",
        "logo": "http://bisondesign.net//images/bison.png"
    },
    "author": {
        "@type": "Person",
        "name": "",
        
        "image": {
            "@type": "ImageObject",
            "url": "http://bisondesign.net//images/bison.png",
            "width": 250,
            "height": 250
        }, 
        
        "url": "http://bisondesign.net/",
        "sameAs": [
            
            
             
             
             
             
             
            
        ],
        "description": "Software architect, Lover of mathematics."
        
    },
    "headline": "Use-case Driven API Design (part 2)",
    "name": "Use-case Driven API Design (part 2)",
    "wordCount":  1046 ,
    "timeRequired": "PT5M",
    "inLanguage": {
      "@type": "Language",
      "alternateName": "en"
    },
    "url": "http://bisondesign.net/post/use-case-driven-design-2/",
    "datePublished": "2018-04-07T20:21Z",
    "dateModified": "2018-04-07T20:21Z",
    
    "image": {
        "@type": "ImageObject",
        "url": "http://bisondesign.net/images/lptzrhqh6hplqmtedyra.jpg",
        "width": 3000,
        "height": 1445
    },
    
    "keywords": "API, Design",
    "description": "",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "http://bisondesign.net/post/use-case-driven-design-2/"
    }
}
    </script>
    


    

    

    
    <link  href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0-alpha1/katex.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0-alpha1/katex.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0-alpha1/contrib/auto-render.min.js" integrity="sha384-cXpztMJlr2xFXyDSIfRWYSMVCXZ9HeGXvzyKTYrn03rsMAlOtIQVzjty5ULbaP8L" crossorigin="anonymous"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, 
        {
              delimiters: [
                  {left: "$$", right: "$$", display: true},
                  {left: "\\[", right: "\\]", display: true},
                  {left: "$", right: "$", display: false},
                  {left: "\\(", right: "\\)", display: false}
              ]
          }
        );
      });
    </script>

    

</head>
<body class="nav-closed">

  <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        
        
        
            <h3>Follow me</h3>
            <li class="nav-opened" role="presentation">
            	<a href="https://github.com/adobrowolski">Github repos</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="/">Blog</a>
            </li>
        
        
    </ul>

    
    <a class="subscribe-button icon-feed" href="/index.xml">Subscribe</a>
    
</div>
<span class="nav-cover"></span>


 <div class="site-wrapper">




  
  <header class="main-header post-head" style="background-image: url(/images/lptzrhqh6hplqmtedyra.jpg)">
  
  <nav class="main-nav overlay clearfix">


  
      <a class="blog-logo" href="http://bisondesign.net/"><img src="/images/bison.png" alt="Home" /></a>
  
  
      <a class="menu-button" href="#"><span class="burger">&#9776;</span><span class="word">Menu</span></a>
  
  </nav>
</header>



<main class="content" role="main">




  <article class="post post">

    <header class="post-header">
        <h1 class="post-title">Use-case Driven API Design (part 2)</h1>
        <small></small>

        <section class="post-meta">
        
          <time class="post-date" datetime="2018-04-07T20:21:11-05:00">
            Apr 7, 2018
          </time>
        
         
          <span class="post-tag small"><a href="http://bisondesign.net/tags/api/">#API</a></span>
         
          <span class="post-tag small"><a href="http://bisondesign.net/tags/design/">#Design</a></span>
         
        </section>
    </header>

    <section class="post-content">
      

<h3 id="preface">Preface</h3>

<p>In the <a href="../use-case-driven-design-1/">previous post</a> I talked about the importance of good design when
making a published API. I ended by giving four &lsquo;C&rsquo;s of a good API: complete,
compact, consistent and clear. Here I elaborate on them one by one.</p>

<h4 id="complete">Complete</h4>

<p>An API design is complete if it allows customers to write client code that
supports all use cases allowed by the business. This is a dynamic situation.
With time the business may change their policy and allow new use cases against
the same domain objects. Or it may introduce new domain object types. In either
case a once complete API may suddenly become incomplete.</p>

<p>It would be a mistake to anticipate the business and to allow clients to do
things that are not allowed by the business just in case it is allowed in the
future. This type of thinking can lead to vulnerabilities and loopholes. In the
worst case it can even lead to data corruption as business invariants may not
be protected. For this reason it is best to start with an agreed set of
business capabilities that can be developed into use cases and the API can be
designed to support those.</p>

<p>Adding behavior or new types to a domain should not break existing client code.
Breaking changes, though rare, can happen and the smart architect is prepared
for these.  This can be demonstrated with a concrete example.</p>

<blockquote>
<p><strong>Example.</strong> The Department of Motor Vehicles API may initially allow customers
to manage their home address information with public APIs, but later decide that
this business capability should no longer be supported. It would be much better
for this to appear as a deprecation of an API rather than a reduction in the
scope of a much broader API.</p>

<p>Now if the initial design had allowed the client code to supply a new customer
info object (<code>UpdateDriverInfo</code> which included the customer&rsquo;s address), this
API would end up being clunky after the business change. The implementation
would require new business logic (did the address change?) and failure modes.
These changes would trigger changes to the documentation as well. While any
breaking change is hard on client developers, adding failure modes to an
existing API is worse since it entails extra work on the part of the client.</p>

<p>A much better initial design would be an API that changed only the customer
address (<code>UpdateDriverAddress</code>) as this could simply be deprecated in one
release and eliminated in another. It would also be easier for client
developers to see the effects of the deprecation.</p>
</blockquote>

<p>You may be wondering if the logical continuation of this reasoning is to have
separate APIs for the customer&rsquo;s street address, city, zip code, etc. Your
intuition will tell you that this is wrong, but there is also a solid principle
against such granularity. Go back to the business and ask them: would you ever
allow the customer to change their city without changing the rest of their
address? They will tell you that the likelihood of a customer moving from one
city to another but keeping the same street address is so small that it is
effectively zero. Some things tend to change together and can be treated as a
single &ldquo;value&rdquo;. This also leads to a more compact set of APIs, which leads to
our second consideration for good API design.</p>

<h4 id="compact">Compact</h4>

<p>There are two divergent schools of thought regarding the design of an API. A
<strong>humane interface</strong> provides many convenience methods. It leads to shorter
client code and a more fluid program structure. A <strong>minimal interface</strong> is just
as complete but with a minimum of redundancy. Client code has one clear
approach that tends to be longer.</p>

<p>When designing a published API, it is good to keep in mind that changes are
very risky once the API is published. A client may be using the API and
removing it may cause the client code to break. As a result, API methods are
often deprecated and not removed (Java 9 removed APIs that had been
deprecated since Java 2 and the repercussions will last almost as long). For
this reason it is better to design a <em>minimal interface</em> and set a very high
bar for adding convenience methods in future releases.</p>

<p>In reality risk mitigation through compactness is advice squarely aimed at
framework and library API sets where business constraints are non-existent or
negligible (the business has no business changing the definition of a natural
logarithm). For business objects, whose API are primarily defined by business
needs and must preserve business invariants, compactness is not as high a
priority.</p>

<p>Instead business domain APIs should be first factored along the lines drawn by
use cases which allow mutation. Business data that is needed to support command
use cases should be encapsulated within a sub-domain. Then within that
sub-domain compactness can play a secondary role in the design of the APIs.</p>

<blockquote>
<p><strong>Example.</strong> In the library checkout service the business may decide that a
checkout is allowed only if</p>

<ul>
<li>the borrower has less than \$10.00 in fines</li>
<li>the borrower has fewer than 25 items out already</li>
<li>a copy of the item is not already being held by the borrower</li>
</ul>

<p>An analysis of the use cases would show that the fines are primarily managed by
another subdomain (library accounts). But the number and particulars of the
held items belong to the same service that manages checkout. So for this reason
a single API that returns the collection of all items held by a particular
borrower would be both compact and appropriate. The same subdomain would also
expose an API that allows a new item to be added the list (<code>BorrowItem</code>).
Adding an item would be accomplished transactionally, so that two checkouts
done at the same time from different clients would not both succeed if they
would put that borrower over the 25 item limit or if they both attempted to add
the same item.</p>
</blockquote>

<h4 id="consistent">Consistent</h4>

<ul>
<li>Naming.</li>
<li>Uniformity of behavior.</li>
<li>Error handling.</li>
<li>Event publishing.</li>
<li>Documentation.</li>
</ul>

<h4 id="clear-aka-intuitive">Clear (aka Intuitive)</h4>

<p>Closely related to paper testing.
Proportional to how close your solution is to the true model.
Warning not to overestimate your own intuition (confirmation bias).</p>

<h3 id="conclusion">Conclusion</h3>

<p>In the <a href="../use-case-driven-design-3/">third post</a> in this series I will delve into the design process,
continuing to use the on-line library service example.</p>

    </section>


  <footer class="post-footer">


    
    <figure class="author-image">
        <a class="img" href="http://bisondesign.net/" style="background-image: url(/images/bison.png)"><span class="hidden">Andrew Dobrowolski's Picture</span></a>
    </figure>
    

    





<section class="author">
  <h4><a href="http://bisondesign.net/">Andrew Dobrowolski</a></h4>
  
  <p>Software architect, Lover of mathematics.</p>
  
  <div class="author-meta">
    <span class="author-location icon-location">Ann Arbor, MI</span>
    <span class="author-link icon-link"><a href="http://bisondesign.net/">http://bisondesign.net/</a></span>
  </div>
</section>



    
<section class="share">
  <h4>Share this post</h4>
  <a class="icon-twitter" style="font-size: 1.4em" href="https://twitter.com/share?text=Use-case%20Driven%20API%20Design%20%28part%202%29&nbsp;-&nbsp;Bison%20Design&amp;url=http%3a%2f%2fbisondesign.net%2fpost%2fuse-case-driven-design-2%2f"
      onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
      <span class="hidden">Twitter</span>
  </a>
  <a class="icon-facebook" style="font-size: 1.4em" href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2fbisondesign.net%2fpost%2fuse-case-driven-design-2%2f"
      onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
      <span class="hidden">Facebook</span>
  </a>
  <a class="icon-pinterest" style="font-size: 1.4em" href="http://pinterest.com/pin/create/button/?url=http%3a%2f%2fbisondesign.net%2fpost%2fuse-case-driven-design-2%2f&amp;description=Use-case%20Driven%20API%20Design%20%28part%202%29"
      onclick="window.open(this.href, 'pinterest-share','width=580,height=296');return false;">
      <span class="hidden">Pinterest</span>
  </a>
  <a class="icon-google-plus" style="font-size: 1.4em" href="https://plus.google.com/share?url=http%3a%2f%2fbisondesign.net%2fpost%2fuse-case-driven-design-2%2f"
     onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
      <span class="hidden">Google+</span>
  </a>
</section>



    

<div id="disqus_thread"></div>
<script type="text/javascript">
  var disqus_shortname = 'www-bisondesign-net';
  var disqus_url = 'http:\/\/bisondesign.net\/post\/use-case-driven-design-2\/';
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>




  </footer>
</article>

</main>


  <aside class="read-next">
  
      <a class="read-next-story" style="background-image: url(/images/lptzrhqh6hplqmtedyra.jpg)" href="/post/use-case-driven-design-1/">
          <section class="post">
              <h2>Use-case Driven API Design (part 1)</h2>
              
          </section>
      </a>
  
  
      <a class="read-next-story prev" style="background-image: url(/images/jj-thompson-142854.jpg)" href="/post/solid-UI-components/">
          <section class="post">
              <h2>SOLID Web UI Components</h2>
          </section>
      </a>
  
</aside>



    <footer class="site-footer clearfix">
        <section class="copyright"><a href="">Bison Design</a> All rights reserved - 2017</section>
        
    </footer>
    </div>
    <script type="text/javascript" src="/js/jquery.js"></script>
    <script type="text/javascript" src="/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="/js/index.js"></script>
    <script type="text/javascript" src="/js/prism.js"></script>
    
</body>
</html>

